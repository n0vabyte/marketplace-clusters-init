---
- name: Remove provisioner from authorized_keys
  lineinfile:
    dest: /root/.ssh/authorized_keys
    state: absent
    regexp: '^.+ansible$'
  #when: debug is undefined or debug == 'YES'   
  when: "trigger == 'destroy'"

- name: Remove provisioner ssh keys
  file:
    path: '{{ item }}'
    state: absent
  run_once: true
  delegate_to: localhost
  loop:
    - '{{ ansible_env.HOME }}/.ssh/id_ansible_ed25519'
    - '{{ ansible_env.HOME }}/.ssh/id_ansible_ed25519.pub'
  #when: debug is undefined or debug == 'YES'
  when: "trigger == 'destroy'"